<html>
<head>
<title>ThreeJS</title>
<style>
body { margin: 0; padding: 0px; }
canvas { width: 100%; height: 100% }
</style>
</head>
<body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/103/three.js"></script>


<script>
var presto = presto || {}
presto.color = {
    random : function(){
        let r = ('0' + Math.floor(Math.random() * 255).toString(16)).slice(-2);
        let g = ('0' + Math.floor(Math.random() * 255).toString(16)).slice(-2);
        let b = ('0' + Math.floor(Math.random() * 255).toString(16)).slice(-2);
        return '#' + r + g + b;
    }
}

presto.cube = {
    create : function(i){
        let color = presto.color.random();

        let cube = new THREE.Mesh( new THREE.BoxGeometry( 1.5, 0.5, 1 ), new THREE.MeshBasicMaterial( { color: color } ) );
        cube.position = new THREE.Vector3(parseFloat(i), parseFloat(i), parseFloat(i));

        cube.onAfterRender = function(){
            cube.rotation.x += 1 / (2*i);
            cube.rotation.y += 1 / (2*i);
            cube.rotation.z += 1 / (2*i);
        };
        return cube;
    }
}

presto.line = {
    create : function(i){
        let color = presto.color.random();

        let geometry = new THREE.Geometry();
        geometry.vertices.push(new THREE.Vector3( -2, 1, 1) );
        geometry.vertices.push(new THREE.Vector3( 0, 2, 0) );
        geometry.vertices.push(new THREE.Vector3( 3, 0, 0) );
        let line = new THREE.Line( geometry, new THREE.MeshBasicMaterial( { color: color } ) );

        line.onAfterRender = function(){
            line.rotation.x += 1 / (3*i);
            line.rotation.y += 1 / (3*i);
            line.rotation.z += 1 / (3*i);
        };
        return line;
    }
}

var scene = new THREE.Scene();
var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );
camera.position.z = 7;

var renderer = new THREE.WebGLRenderer();
renderer.setSize( window.innerWidth, window.innerHeight );
document.body.appendChild( renderer.domElement );


for(i=0; i<=200; i++){
    console.log(i);
	scene.add( presto.cube.create(i) );
    scene.add( presto.line.create(i) );
}


var animate = function () {
	requestAnimationFrame( animate );
	renderer.render( scene, camera );
};

animate();










function Actor() {
    this.prop = {
        state : 0,
    };

    this.set = function(v){ this.prop.state = v; return this; };
    this.get = function(){ return this.prop.state;};
}

Object.assign(Actor.prototype, {state:{

        test : function() {
            console.log(this);
            console.log(`Im test, state: ${this}`);
        }}
});


let actor = new Actor();
let actor1 = new Actor();

actor.set(111);
actor1.set(222);
actor.state.test();

console.log(actor.get());
console.log(actor1.get());





</script>
</body>
</html>
