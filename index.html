<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Javascript-PRESTO</title>

		<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" type="text/javascript" charset="utf-8" async="async"></script>
		<link href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" rel="stylesheet" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Nunito:200,600" rel="stylesheet" type="text/css">
	</head>
<body>
<script>
  var presto = presto || {
	loading_gif : "https://www.machioka.co.jp/images/img-loading.gif",
	  
    load : function(target, url, params) {
      console.log(`load content. url:${url}, target:${target}`);
      this.loading(target);
      
      $.ajax({ type: "GET", url: url, data: params, timeout: 3000 }).done(function(data){
			  console.log(data);
			  $(target).html(data);
		  }).fail(function(data){
			  console.log('error',data);
			  $(target).html(data);
		  }).always(function(data){
			  console.log('always...');
		  });
    },
    
    loading : function (target) {
		  if(! $(`${target} div.presto-loading`).length ){
			  $(target).prepend(`<div class='presto-loading' style='text-align:center; width:100%; height:90%;'><img src='${this.loading_gif}'></div>`);
		  }
	  }
  };

$(function(){
	$("body").on("click", "a.presto-get", function(event){
		event.preventDefault();
		console.log(`<${$(this).text()}> is clicked ! `);
		let url = $(this).attr("href");
		let target = $(this).attr("p-target");
		let parameter = $(this).attr("p-param");
		if(! $(this).attr("href")) {
			console.log(`no action to do !`);
			return false;
		}

		if(target){ return presto.load(target, url, parameter);
		}else{ return presto.load("#game-content-panel", url, parameter); }
	});
});
</script>
	<a class="btn btn-sm btn-info presto-get" href="/javascript-presto/" p-target="#content">Load</a>
	<div id="content"></div>
	
	
  
  
  
</body>
</html>
